* C:\Users\corne\OneDrive\Documentos\Diogenes\Facultad\C2\dce-g5-proyecto_integrador\Simulacion - v.5.asc
Q1 N007 N007 N005 0 BC557B
Q2 N008 N007 N006 0 BC557B
Q3 N007 Vref N010 0 BC547B
Q4 N008 Vf N010 0 BC547B
Q5 N004 N002 N001 0 TIP42C
Q6 N002 N003 N004 0 TIP41C
R5 N009 Vf 390
R6 Vf N011 1K
RL Vo 0 {RL}
V1 Vref 0 {VREFDC} AC {VREFAC}
VIN N001 0 {VINDC} AC {VINAC}
R8 N001 N005 470
R9 N001 N006 470
C3 Vo 0 1µ
R2 Vo N004 0.1
R3 N017 N023 1k
R4 N022 N027 1k
R7 N023 0 47k
R10 N027 N026 47k
R11 N026 N025 1k
R12 N028 0 470
Q7 N003 N025 N028 0 BC547B
R13 N018 Vref 4.7k
R14 N019 0 1.5k
R15 N021 N020 1.5k
R16 N029 Vf 8.2k
R17 N029 0 6.8k
R18 N021 N030 1.5k
R20 N022 N024 1.5k
R19 N024 0 1.5k
R21 N011 N016 680
M1 N011 N015 0 0 2N7002
V§SELA N015 0 5
Q10 N010 N012 0 0 BC547B
Q11 N012 N012 0 0 BC547B
R22 N001 N012 3.3k
R23 N004 N009 2.7k
XU6 N013 N014 VPOSA 0 N017 LM324
XU1 N023 N027 VPOSA 0 N026 LM324
XU2 N029 N030 VPOSA 0 N030 LM324
XU3 N019 N020 VPOSA 0 N020 LM324
XU4 N021 N024 VPOSA 0 N022 LM324
VPOSA1 VPOSA 0 5
R24 N019 N018 2.7k
V2 N003 N008 0
VPOSA2 VPOSANT 0 -3
R25 N014 N017 10k
R26 N004 N013 1k
R27 Vo N014 1k
R29 N013 0 10k
R1 N016 0 270
.model NPN NPN
.model PNP PNP
.lib C:\Users\corne\AppData\Local\LTspice\lib\cmp\standard.bjt
.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\corne\AppData\Local\LTspice\lib\cmp\standard.mos
.op
.param VINDC 6.35
.param VINAC 1
.param VREFDC 1.2
.param VREFAC 0
;param RL 10
;dc VIN 4 24
;step param RE 1k 1.5k 100
.step param RL 1 10 0.5
* Mido regulacion de linea
.meas DC Vo1rl FIND V(Vo) AT=12
.meas DC Vo2rl FIND V(Vo) AT=24
.meas DC RegLin PARAM ((Vo2rl-Vo1rl)/12)
* Mido regulacion de carga
.meas OP Vo1rc FIND V(Vo) AT 100
.meas OP Vo2rc FIND V(Vo) AT 5
.meas OP Io1rc FIND I(RL) AT 100
.meas OP Io2rc FIND I(RL) AT 5
* Mido eficiencia
* -100*((V(vo)*I(RL))/(V(VIN)*I(VIN)))
.meas OP RegCar PARAM (-(Vo2rc-Vo1rc)/(Io2rc-Io1rc))
* Elegir opamps de baja Voff
* La alimentación de los opamps es VPOSA, ver si quiero que sea entre\n+Vcc y 0 o entre +Vcc y -Vcc.
* SELA es la tensión de control con la que elegimos si la salida es de 5V\no de 3.3V. Cuando SELA = 1, la salida es de 5V y cuando es 0, de 3.3V\n(si lo consideramos como una señal digital). También hay que considerar\nque la alimentación de los opamps va a ser VPOSA y nos convendría\nusar la menor cantidad de tensiones de control diferentes, por lo que\nsería conveniente que VPOSA sea también SELA.
* Tener en cuanta que hay "low dropout" cuando la Ro (estática) es baja.
.MODEL TIP42C PNP(Is=66.19f Xti=3 Eg=1.11 Vaf=100 Bf=137.6 Ise=862.2f Ne=1.481 Ikf=1.642 Nk=.5695 Xtb=2 Br=5.88 Isc=273.5f Nc=1.24 Ikr=3.555 Rc=79.39m Cjc=870.4p Mjc=.6481 Vjc=.75 Fc=.5 Cje=390.1p Mje=.4343 Vje=.75 Tr=235.4n Tf=23.21n Itf=71.33 Xtf=5.982 Vtf=10 Rb=.1 Vceo=100 Icrating=6 mfg=Texas)
.MODEL TIP41C NPN (IS=7.55826e-11 BF=260.542 NF=1.11221 VAF=100 IKF=0.526814 ISE=1e-08 NE=2.18072 BR=26.0542 NR=1.5 VAR=1000 IKR=3.54059 ISC=1e-08 NC=1.63849 RB=4.56157 IRB=0.1 RBM=0.1 RE=0.0162111 RC=0.0810556 XTB=0.1 XTI=1 EG=1.206 CJE=1.93296e-10 VJE=0.4 MJE=0.259503 TF=1e-08 XTF=4.06972 VTF=7.1157 ITF=0.001 CJC=1.09657e-10 VJC=0.730921 MJC=0.23 XCJC=0.803085 FC=0.8 TR=9.01013e-08 PTF=0 Vceo=100 ICrating=6 mfg=ON_Semi)
* Todos los transistores pueden ser los TIP4x que tienen un beta muy chico o los BC5x7 con uno\nmucho mayor. Mejora la ganancia del circuito pero no tanto respecto a los anteriores. Sin embargo,\nhay que tener en cuenta que pueden haber grandes diferencias entre el circuito real y el simulado.\nEn la hoja de datos, el beta de los TIP4x es de alrededor de 20: muy chico.
* Queremos los TIP42 en el transistor de paso porque\nqueremos que sea "low dropout", es decir, baja VCE.
* Usamos cinco opamps, los cuales se pueden comprar solos en un solo encampsulado\nde a varios. Lo máximo es encapsulado de cuatro juntos, por lo que convendría buscar\nalguna forma de eliminar uno y quedarnos solo con esos cuatro.
* Revisar qué hace R11
* 5*R
* 5.44*R
* 4.6*R
* R
* R
* R
* R
* R
* Los valores de resistencias fueron elegidos de acuerdo con la presentación\nde la práctica pasada.
.inc LM324.lib
;tran 0.99999
* R = 1000 * (1-TIME), para usar el transient
.backanno
.end
