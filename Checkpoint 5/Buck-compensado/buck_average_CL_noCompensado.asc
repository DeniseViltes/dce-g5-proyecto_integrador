Version 4
SHEET 1 2488 1028
WIRE 560 -352 448 -352
WIRE 624 -352 560 -352
WIRE 1008 -352 704 -352
WIRE 1152 -352 1008 -352
WIRE 1200 -352 1152 -352
WIRE 1248 -352 1200 -352
WIRE 1520 -352 1248 -352
WIRE 1520 -336 1520 -352
WIRE 1248 -272 1248 -352
WIRE 1152 -256 1152 -352
WIRE 448 -160 448 -352
WIRE 720 -160 448 -160
WIRE 928 -160 720 -160
WIRE 1152 -160 1152 -192
WIRE 1200 -160 1152 -160
WIRE 1248 -160 1248 -192
WIRE 1248 -160 1200 -160
WIRE 1200 -144 1200 -160
WIRE 1520 -128 1520 -256
WIRE 1584 -128 1520 -128
WIRE 720 -80 720 -160
WIRE 736 -80 720 -80
WIRE 1040 -80 864 -80
WIRE 1520 -80 1520 -128
WIRE 1040 -64 1040 -80
WIRE 736 -32 704 -32
WIRE 928 -32 928 -160
WIRE 928 -32 864 -32
WIRE 704 0 704 -32
WIRE 800 0 800 -16
WIRE 1520 16 1520 0
WIRE 1040 48 1040 16
WIRE 800 224 800 0
WIRE 704 272 672 272
WIRE 368 304 368 288
WIRE 368 320 368 304
WIRE 672 336 672 272
WIRE 800 336 800 304
WIRE 672 352 672 336
WIRE 368 432 368 400
WIRE 672 448 672 432
WIRE 976 464 976 448
WIRE 976 496 976 464
WIRE 1584 512 1584 -128
WIRE 1584 512 1008 512
WIRE 672 528 672 448
WIRE 944 528 672 528
WIRE 1072 544 1008 544
WIRE 1072 592 1072 544
WIRE 976 640 976 560
WIRE 1072 704 1072 672
WIRE -32 768 -64 768
WIRE 224 768 48 768
WIRE -64 816 -64 768
WIRE -64 896 -64 880
WIRE -64 1008 -64 976
FLAG 1200 -144 0
FLAG 1040 48 0
FLAG 1200 -352 out
FLAG 800 0 d
FLAG 560 -352 in
FLAG 976 640 0
FLAG 1072 704 0
FLAG 976 464 VPOS
FLAG 800 336 0
FLAG 704 272 ctrl
IOPIN 704 272 Out
FLAG 672 336 x
FLAG 672 448 y
FLAG 1520 16 0
FLAG 368 432 0
FLAG 368 304 VPOS
FLAG 1008 -352 vd
FLAG 704 0 0
FLAG -64 1008 0
SYMBOL cap 1136 -256 R0
WINDOW 0 -44 28 Left 2
WINDOW 3 -47 63 Left 2
SYMATTR InstName C1
SYMATTR Value 150n
SYMBOL res 1232 -288 R0
SYMATTR InstName Rload
SYMATTR Value {RLOAD}
SYMBOL ind 608 -336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 738µ
SYMBOL voltage 1040 -80 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 0
SYMATTR InstName Vg
SYMATTR Value {VIN}
SYMBOL ccm1 800 -48 M0
SYMATTR InstName U1
SYMATTR Value CCM2
SYMATTR SpiceLine Ron=8m
SYMATTR SpiceLine2 VD=0.5 RD=0.05
SYMBOL Opamps\\LT1215 976 464 M0
SYMATTR InstName U2
SYMBOL voltage 1072 576 R0
WINDOW 123 24 116 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -203 182 Left 2
SYMATTR Value2 AC 0
SYMATTR Value PULSE(0 10 0 1n 1n {ton} {T})
SYMATTR InstName Vref1
SYMBOL bv 800 208 R0
SYMATTR InstName B1
SYMATTR Value V=limit(v(ctrl), 0.01, 0.9)
SYMBOL voltage 672 336 R0
WINDOW 0 41 45 Left 2
WINDOW 123 37 65 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vz1
SYMATTR Value2 AC 1
SYMATTR Value ""
SYMBOL res 1504 -352 R0
SYMATTR InstName R4
SYMATTR Value 207
SYMBOL res 1504 -96 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL voltage 368 304 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vg1
SYMATTR Value 12
SYMBOL voltage -64 880 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value ""
SYMBOL cap -80 816 R0
SYMATTR InstName C2
SYMATTR Value 1Meg
SYMBOL ind 64 752 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L2
SYMATTR Value 1Meg
TEXT 1944 -144 Left 2 ;Simulation directives
TEXT 1944 -104 Left 2 !.lib average.lib
TEXT 1936 40 Left 2 !.ac dec 1000 1 100Meg
TEXT 1936 -8 Left 2 ;.step param RLOAD list 4 10 20 330
TEXT 1936 -32 Left 2 ;.dc Vduty 0.2 0.9 0.01
TEXT 1920 96 Left 2 ;.tran 0 1m 0 1u
TEXT 1936 136 Left 2 !.param RLOAD 330
TEXT 1944 336 Left 2 !.param TiempoMuerto 310n
TEXT 1944 416 Left 2 !.param Duty (6.35/Vin)
TEXT 1944 536 Left 2 !.param fsw  200k
TEXT 1936 456 Left 2 !.param ton (Duty/fsw)
TEXT 1944 368 Left 2 !.param Vin 36
TEXT 1936 496 Left 2 !.param T (1/fsw)
TEXT 1936 568 Left 2 ;.param Duty (6.35/Vin * (1+TiempoMuerto/T))
TEXT 1936 288 Left 2 ;Dutys: {0.52916, 0.17638888}
