Version 4
SHEET 1 3480 1872
WIRE 16 -816 16 -960
WIRE 64 -816 16 -816
WIRE 112 -816 64 -816
WIRE -2048 -800 -2112 -800
WIRE -1856 -800 -1984 -800
WIRE 112 -768 112 -816
WIRE -2240 -752 -2320 -752
WIRE 64 -752 64 -816
WIRE 64 -752 32 -752
WIRE -512 -736 -512 -784
WIRE -432 -736 -512 -736
WIRE -256 -736 -368 -736
WIRE -144 -736 -160 -736
WIRE -32 -736 -64 -736
WIRE 1168 -736 1168 -800
WIRE -2240 -720 -2240 -752
WIRE 64 -720 32 -720
WIRE -2320 -704 -2320 -752
WIRE 64 -704 64 -720
WIRE 112 -704 64 -704
WIRE -256 -688 -256 -736
WIRE -256 -688 -288 -688
WIRE -256 -672 -256 -688
WIRE 672 -672 608 -672
WIRE -512 -624 -512 -736
WIRE -512 -624 -704 -624
WIRE -432 -624 -512 -624
WIRE -288 -624 -288 -688
WIRE -288 -624 -304 -624
WIRE -2512 -608 -2512 -640
WIRE -704 -608 -704 -624
WIRE 1168 -608 1168 -656
WIRE -2544 -592 -2640 -592
WIRE -2032 -592 -2032 -640
WIRE -432 -592 -448 -592
WIRE -160 -592 -160 -736
WIRE -160 -592 -304 -592
WIRE 64 -592 64 -704
WIRE 64 -592 16 -592
WIRE -2320 -576 -2320 -624
WIRE -2320 -576 -2480 -576
WIRE -2240 -576 -2320 -576
WIRE -2112 -576 -2112 -800
WIRE -2112 -576 -2160 -576
WIRE -2064 -576 -2112 -576
WIRE -2544 -560 -2576 -560
WIRE -1856 -560 -1856 -800
WIRE -1856 -560 -2000 -560
WIRE -432 -560 -576 -560
WIRE -256 -560 -256 -608
WIRE -256 -560 -304 -560
WIRE 16 -560 16 -592
WIRE 16 -560 -256 -560
WIRE 288 -560 16 -560
WIRE 432 -560 288 -560
WIRE 608 -560 608 -672
WIRE 608 -560 512 -560
WIRE 752 -560 608 -560
WIRE -2064 -544 -2112 -544
WIRE -704 -528 -704 -544
WIRE -464 -528 -704 -528
WIRE -432 -528 -464 -528
WIRE -192 -528 -304 -528
WIRE -2112 -512 -2112 -544
WIRE -2640 -496 -2640 -592
WIRE -2512 -496 -2512 -544
WIRE -2032 -480 -2032 -528
WIRE -464 -480 -464 -528
WIRE 608 -464 608 -560
WIRE 752 -464 752 -560
WIRE 16 -432 16 -560
WIRE 64 -432 16 -432
WIRE 112 -432 64 -432
WIRE -2576 -416 -2576 -560
WIRE -2480 -416 -2576 -416
WIRE -2320 -416 -2320 -576
WIRE -2320 -416 -2400 -416
WIRE -576 -400 -576 -560
WIRE -1200 -384 -1200 -448
WIRE 112 -384 112 -432
WIRE 64 -368 64 -432
WIRE 64 -368 32 -368
WIRE -192 -352 -192 -528
WIRE -144 -352 -192 -352
WIRE -32 -352 -64 -352
WIRE 64 -336 32 -336
WIRE 64 -320 64 -336
WIRE 112 -320 64 -320
WIRE -1392 -288 -1392 -352
WIRE 608 -288 608 -400
WIRE 752 -288 752 -384
WIRE 752 -288 608 -288
WIRE -2576 -272 -2576 -416
WIRE -2176 -272 -2576 -272
WIRE -1856 -272 -1856 -560
WIRE -1856 -272 -2096 -272
WIRE -1424 -272 -1856 -272
WIRE 64 -272 64 -320
WIRE -1200 -256 -1200 -304
WIRE -1200 -256 -1360 -256
WIRE -1072 -256 -1200 -256
WIRE 608 -256 608 -288
WIRE -1424 -240 -1472 -240
WIRE -1072 -192 -1072 -256
WIRE -3152 -176 -3152 -288
WIRE -1392 -160 -1392 -224
WIRE -1760 -128 -1792 -128
WIRE -1632 -128 -1680 -128
WIRE -3392 -96 -3392 -160
WIRE -1072 -96 -1072 -128
WIRE -3152 -48 -3152 -96
WIRE -3056 -48 -3152 -48
WIRE -3152 16 -3152 -48
WIRE -1712 16 -1712 -32
WIRE -1968 32 -1968 -48
WIRE -1920 32 -1968 32
WIRE -1792 32 -1792 -128
WIRE -1792 32 -1840 32
WIRE -1744 32 -1792 32
WIRE -3392 48 -3392 -16
WIRE -1632 48 -1632 -128
WIRE -1632 48 -1680 48
WIRE -1472 48 -1472 -240
WIRE -1472 48 -1632 48
WIRE -1744 64 -1792 64
WIRE -1712 128 -1712 80
WIRE -2448 144 -2544 144
WIRE -2176 144 -2368 144
WIRE -2064 144 -2176 144
WIRE -1792 144 -1792 64
WIRE -1792 144 -1984 144
WIRE -3152 192 -3152 96
WIRE -2544 224 -2544 144
WIRE -2176 224 -2176 144
WIRE -1792 224 -1792 144
WIRE -2544 352 -2544 304
WIRE -2176 352 -2176 304
WIRE -1792 352 -1792 304
FLAG 608 -256 0
FLAG 288 -560 Vd
FLAG 1168 -608 0
FLAG 1168 -800 vdd
FLAG 64 -272 0
FLAG 16 -960 VCC
FLAG -448 -592 pwm
FLAG -464 -480 0
FLAG -512 -784 vdd
FLAG -576 -400 vdd
FLAG -2640 -496 0
FLAG -2112 -512 0
FLAG -2240 -720 VCC
FLAG -2512 -640 VCC
FLAG -2512 -496 -VCC
FLAG -2032 -640 VCC
FLAG -2032 -480 -VCC
FLAG -1392 -352 VCC
FLAG -1392 -160 -VCC
FLAG -1792 352 0
FLAG -1712 -32 VCC
FLAG -1712 128 -VCC
FLAG -1968 -48 Vref
FLAG -2176 352 0
FLAG -1072 -96 0
FLAG -1200 -448 VCC
FLAG -3392 48 0
FLAG -3056 -48 0
FLAG -3392 -160 Vref
FLAG -3152 192 -VCC
FLAG -3152 -288 VCC
FLAG -1072 -256 pwm
FLAG 672 -672 Vcomp
FLAG -2544 352 0
SYMBOL ind 416 -544 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName IL
SYMATTR Value 700µ
SYMBOL cap 592 -464 R0
SYMATTR InstName C1
SYMATTR Value 150n
SYMBOL res 736 -480 R0
SYMATTR InstName R1
SYMATTR Value 330
SYMBOL voltage 1168 -752 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL res -48 -752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL cap -272 -672 R0
SYMATTR InstName C2
SYMATTR Value 0.33µ
SYMBOL schottky -432 -720 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value D1n5822rl
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -720 -608 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res -48 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL schottky 128 -704 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -4 2 Right 2
SYMATTR InstName D2
SYMATTR Value D1n5822rl
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky 128 -320 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -125 3 Left 2
SYMATTR InstName D3
SYMATTR Value D1n5822rl
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL IR2104 -368 -576 R0
SYMATTR InstName U1
SYMBOL irlz44zsl 0 -736 R0
SYMATTR InstName U2
SYMBOL irlz44zsl 0 -352 R0
SYMATTR InstName U3
SYMBOL OpAmps\\opamp2 -2512 -640 R0
SYMATTR InstName U4
SYMATTR Value LM2901
SYMBOL res -2336 -720 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -2384 -432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 220k
SYMBOL res -2080 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL res -2144 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 39k
SYMBOL cap -1984 -816 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL OpAmps\\opamp2 -1392 -320 R0
SYMATTR InstName U6
SYMATTR Value LM2901
SYMBOL res -1664 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL res -1824 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res -1808 208 R0
SYMATTR InstName R11
SYMATTR Value 100k
SYMBOL res -2192 208 R0
SYMATTR InstName R12
SYMATTR Value 2k
SYMBOL res -1968 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res -2352 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 8.2k
SYMBOL res -1216 -400 R0
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL zener -1056 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -3392 -112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2.5
SYMBOL voltage -3152 -192 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value {vcc}
SYMBOL voltage -3152 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {vcc}
SYMBOL voltage -2544 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL TL081 -1712 -16 R0
SYMATTR InstName U5
SYMBOL TL081 -2032 -624 R0
SYMATTR InstName U7
TEXT 1256 -328 Left 2 !.lib IR2104.lib
TEXT 1248 -376 Left 2 !.lib 1N5822RL.LIB
TEXT 1240 -448 Left 2 !.option noopiter
TEXT 1248 -416 Left 2 ;.option gmin=1e-9
TEXT 1256 -296 Left 2 !.lib irlz44zsl.spi
TEXT 1256 -264 Left 2 !.param vcc 12
TEXT 1264 -224 Left 2 !.tran 0 400u 0 uic
TEXT -3288 -560 Left 2 !.lib lm2901.lib
TEXT -3288 -512 Left 2 !.lib TL081.lib
