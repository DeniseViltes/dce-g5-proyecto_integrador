Version 4
SHEET 1 10276 2608
WIRE -400 -256 -656 -256
WIRE 96 -256 -400 -256
WIRE 320 -256 96 -256
WIRE 1232 -256 320 -256
WIRE -656 -192 -656 -256
WIRE 96 -192 96 -256
WIRE 320 -192 320 -256
WIRE 1232 -160 1232 -256
WIRE 1168 -112 1072 -112
WIRE 1008 -64 784 -64
WIRE -400 -48 -400 -256
WIRE -656 -16 -656 -112
WIRE 1232 -16 1232 -64
WIRE 1232 -16 1072 -16
WIRE 96 16 96 -112
WIRE 320 16 320 -112
WIRE 1232 32 1232 -16
WIRE 2096 32 1232 32
WIRE 2128 32 2096 32
WIRE 2240 32 2208 32
WIRE 2480 32 2240 32
WIRE 2640 32 2480 32
WIRE 208 64 160 64
WIRE 256 64 208 64
WIRE 1232 80 1232 32
WIRE 2480 96 2480 32
WIRE 2640 96 2640 32
WIRE 3008 128 3008 80
WIRE 3200 128 3200 80
WIRE 96 144 96 112
WIRE 208 144 208 64
WIRE 208 144 96 144
WIRE 320 192 320 112
WIRE 432 192 320 192
WIRE 624 192 512 192
WIRE 784 192 784 -64
WIRE 784 192 624 192
WIRE 1232 192 1232 160
WIRE 2096 208 2096 32
WIRE 2128 208 2096 208
WIRE 2240 208 2240 32
WIRE 2240 208 2224 208
WIRE 3008 240 3008 208
WIRE 3200 240 3200 208
WIRE 96 256 96 144
WIRE 320 256 320 192
WIRE 2480 256 2480 176
WIRE 2640 256 2640 160
WIRE -160 304 -560 304
WIRE -80 304 -160 304
WIRE 32 304 -80 304
WIRE 992 304 384 304
WIRE 1136 304 992 304
WIRE 1232 304 1232 272
WIRE 1232 304 1136 304
WIRE -160 336 -160 304
WIRE 1232 336 1232 304
WIRE 2128 336 2128 208
WIRE 2224 336 2224 208
WIRE 96 384 96 352
WIRE 208 384 96 384
WIRE 320 384 320 352
WIRE 320 384 208 384
WIRE 1232 464 1232 416
WIRE 1504 464 1232 464
WIRE -560 480 -560 304
WIRE -560 480 -1616 480
WIRE -400 480 -400 32
WIRE -256 480 -400 480
WIRE 1504 480 1504 464
WIRE 2016 480 1984 480
WIRE 2128 480 2128 416
WIRE 2128 480 2096 480
WIRE 2160 480 2128 480
WIRE -160 496 -160 416
WIRE 1232 512 1232 464
WIRE 1984 512 1984 480
WIRE 2224 512 2224 416
WIRE 2224 512 2192 512
WIRE 2384 512 2224 512
WIRE -400 528 -400 480
WIRE 208 528 208 384
WIRE 1680 560 1552 560
WIRE 2160 560 2160 480
WIRE 2192 560 2192 512
WIRE 2384 560 2384 512
WIRE -256 576 -256 480
WIRE -256 576 -336 576
WIRE 144 576 -256 576
WIRE 1680 592 1680 560
WIRE 2144 592 2096 592
WIRE 2256 592 2208 592
WIRE 1232 624 1232 592
WIRE 2096 624 2096 592
WIRE -400 704 -400 624
WIRE 208 704 208 624
WIRE 208 704 -400 704
WIRE 1504 704 1504 576
WIRE 1680 704 1680 672
WIRE 2176 704 2176 624
WIRE 2384 704 2384 640
WIRE 2384 704 2176 704
WIRE -1152 752 -1152 720
WIRE 208 752 208 704
WIRE 1232 752 1232 704
WIRE -1616 768 -1616 480
WIRE -1568 768 -1616 768
WIRE -1440 768 -1488 768
WIRE -1312 768 -1360 768
WIRE -1184 768 -1312 768
WIRE -544 768 -544 736
WIRE -1056 784 -1120 784
WIRE -976 784 -1056 784
WIRE -800 784 -896 784
WIRE -576 784 -800 784
WIRE -1184 800 -1216 800
WIRE -400 800 -512 800
WIRE -96 800 -400 800
WIRE 1856 800 1776 800
WIRE 1984 800 1856 800
WIRE 2176 800 2176 704
WIRE 2176 800 2064 800
WIRE -576 816 -592 816
WIRE -1152 832 -1152 816
WIRE 624 832 624 192
WIRE 1248 832 624 832
WIRE 1856 832 1856 800
WIRE -1312 848 -1312 768
WIRE -544 848 -544 832
WIRE 1696 848 1696 816
WIRE 1776 864 1776 800
WIRE 1776 864 1728 864
WIRE 1360 880 1312 880
WIRE 1536 880 1440 880
WIRE 1664 880 1536 880
WIRE 1776 896 1728 896
WIRE -1216 928 -1216 800
WIRE -1056 928 -1056 784
WIRE -1056 928 -1216 928
WIRE -592 944 -592 816
WIRE -512 944 -592 944
WIRE -400 944 -400 800
WIRE -400 944 -432 944
WIRE 1696 944 1696 912
WIRE 1856 944 1856 912
WIRE -592 960 -592 944
WIRE 1248 976 1248 928
WIRE -1312 992 -1312 928
WIRE 1536 1056 1536 880
WIRE 1600 1056 1536 1056
WIRE 1776 1056 1776 896
WIRE 1776 1056 1680 1056
WIRE 1920 1056 1776 1056
WIRE 2112 1056 2000 1056
WIRE -592 1088 -592 1040
WIRE -1152 1104 -1152 1072
WIRE 1248 1104 1248 1056
WIRE -1472 1120 -1520 1120
WIRE -1312 1120 -1392 1120
WIRE -1184 1120 -1312 1120
WIRE -1056 1136 -1120 1136
WIRE -976 1136 -1056 1136
WIRE -800 1136 -800 784
WIRE -800 1136 -896 1136
WIRE -1184 1152 -1216 1152
WIRE -1312 1200 -1312 1120
WIRE -96 1248 -96 800
WIRE 2112 1248 2112 1056
WIRE 2112 1248 -96 1248
WIRE -1216 1264 -1216 1152
WIRE -1056 1264 -1056 1136
WIRE -1056 1264 -1216 1264
WIRE -1312 1344 -1312 1280
WIRE -1520 1424 -1520 1120
WIRE 992 1424 992 304
WIRE 992 1424 -1520 1424
FLAG 1136 304 Vf
FLAG 1856 944 0
FLAG 1248 1104 0
FLAG -160 496 0
FLAG -1312 992 0
FLAG -1312 1344 0
FLAG -592 1088 0
FLAG 2480 256 0
FLAG 2640 256 0
FLAG -1152 832 VPOSA
FLAG -544 848 VPOSA
FLAG 2256 592 VPOSA
FLAG 1696 944 VPOSA
FLAG -1152 1168 VPOSA
FLAG -656 -16 0
FLAG 1504 704 0
FLAG 1232 752 0
FLAG 1680 704 0
FLAG 208 752 0
FLAG 2480 32 Vo
FLAG 3008 240 0
FLAG 3008 80 VPOSA
FLAG -80 304 Vref
FLAG 3200 240 0
FLAG 3200 80 VPOSANT
FLAG 1984 512 0
FLAG -1152 1072 0
FLAG -1152 720 0
FLAG -544 736 0
FLAG 1696 816 0
FLAG 2096 624 0
DATAFLAG 1488 32 ""
DATAFLAG 880 304 ""
DATAFLAG 1360 464 ""
DATAFLAG 2144 800 ""
DATAFLAG 1776 800 ""
DATAFLAG 2336 32 ""
DATAFLAG 2048 32 "$-V(Vo)"
SYMBOL pnp 160 112 R180
SYMATTR InstName Q1
SYMATTR Value BC557B
SYMBOL pnp 256 112 M180
SYMATTR InstName Q2
SYMATTR Value BC557B
SYMBOL npn 32 256 R0
WINDOW 3 52 65 Left 2
SYMATTR Value BC547B
SYMATTR InstName Q3
SYMBOL npn 384 256 M0
WINDOW 3 42 64 Left 2
SYMATTR Value BC547B
SYMATTR InstName Q4
SYMBOL pnp 1168 -64 M180
SYMATTR InstName Q5
SYMATTR Value TIP42C
SYMBOL npn 1008 -112 R0
SYMATTR InstName Q6
SYMATTR Value TIP41C
SYMBOL res 1216 176 R0
SYMATTR InstName R5
SYMATTR Value 390
SYMBOL res 1216 320 R0
SYMATTR InstName R6
SYMATTR Value 1K
SYMBOL res 2464 80 R0
SYMATTR InstName RL
SYMATTR Value {RL}
SYMBOL voltage -160 320 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC {VREFAC}
SYMATTR InstName V1
SYMATTR Value {VREFDC}
SYMBOL voltage -656 -208 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC {VINAC}
SYMATTR InstName VIN
SYMATTR Value {VINDC}
SYMBOL res 80 -208 R0
SYMATTR InstName R8
SYMATTR Value 470
SYMBOL res 304 -208 R0
SYMATTR InstName R9
SYMATTR Value 470
SYMBOL cap 2624 96 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res 2224 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.1
SYMBOL res 2080 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 2016 1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 1840 816 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 1696 1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1456 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1K
SYMBOL res 1232 960 R0
SYMATTR InstName R12
SYMATTR Value 470
SYMBOL npn 1312 832 M0
SYMATTR InstName Q7
SYMATTR Value BC547B
SYMBOL res -1472 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 4.7k
SYMBOL res -1328 832 R0
SYMATTR InstName R14
SYMATTR Value 1.5k
SYMBOL res -880 768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1.5k
SYMBOL res -1376 1104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 8.2k
SYMBOL res -1328 1184 R0
SYMATTR InstName R17
SYMATTR Value 6.8k
SYMBOL res -880 1120 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1.5k
SYMBOL res -416 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1.5k
SYMBOL res -608 944 R0
SYMATTR InstName R19
SYMATTR Value 1.5k
SYMBOL res 1216 496 R0
SYMATTR InstName R21
SYMATTR Value 680
SYMBOL nmos 1552 480 M0
SYMATTR InstName M1
SYMATTR Value 2N7002
SYMBOL voltage 1680 576 R0
WINDOW 3 32 89 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value 0
SYMATTR InstName SELA
SYMBOL npn 144 528 R0
SYMATTR InstName Q10
SYMATTR Value BC547B
SYMBOL npn -336 528 M0
SYMATTR InstName Q11
SYMATTR Value BC547B
SYMBOL res -416 -64 R0
SYMATTR InstName R22
SYMATTR Value 3.3k
SYMBOL res 1216 64 R0
SYMATTR InstName R23
SYMATTR Value 2.7k
SYMBOL OpAmps\\opamp2 2240 592 R90
SYMATTR InstName U6
SYMATTR Value LM324
SYMBOL OpAmps\\opamp2 1696 944 R180
WINDOW 3 36 85 Left 2
SYMATTR Value LM324
SYMATTR InstName U1
SYMBOL OpAmps\\opamp2 -1152 1200 M180
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL OpAmps\\opamp2 -1152 848 M180
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL OpAmps\\opamp2 -544 864 M180
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL voltage 3008 112 R0
SYMATTR InstName VPOSA1
SYMATTR Value 5
SYMBOL res -1344 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 2.7k
SYMBOL voltage 528 192 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName V2
SYMATTR Value 0
SYMBOL voltage 3200 112 R0
SYMATTR InstName VPOSA2
SYMATTR Value -3
SYMBOL res 2368 544 R0
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL res 2112 320 R0
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL res 2208 320 R0
SYMATTR InstName R27
SYMATTR Value 1k
SYMBOL res 2112 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 10k
SYMBOL res 1216 608 R0
SYMATTR InstName R1
SYMATTR Value 270
TEXT -1552 232 Left 2 !.op
TEXT -968 -192 Left 2 !.param VINDC 6.35
TEXT -968 -152 Left 2 !.param VINAC 1
TEXT -248 160 Left 2 !.param VREFDC 1.2
TEXT -248 200 Left 2 !.param VREFAC 0
TEXT -1912 232 Left 2 !;.param RL 10
TEXT -968 -104 Left 2 !;dc VIN 4 24
TEXT -1912 312 Left 2 !;step param RE 1k 1.5k 100
TEXT -1912 272 Left 2 !.step param RL 1 20 0.2
TEXT -1904 -208 Left 2 ;Mido regulacion de linea
TEXT -1904 -168 Left 2 !.meas DC Vo1rl FIND V(Vo) AT=12
TEXT -1904 -144 Left 2 !.meas DC Vo2rl FIND V(Vo) AT=24
TEXT -1904 -120 Left 2 !.meas DC RegLin PARAM ((Vo2rl-Vo1rl)/12)
TEXT -1904 -64 Left 2 ;Mido regulacion de carga
TEXT -1904 -24 Left 2 !.meas OP Vo1rc FIND V(Vo) AT 100
TEXT -1904 0 Left 2 !.meas OP Vo2rc FIND V(Vo) AT 5
TEXT -1904 24 Left 2 !.meas OP Io1rc FIND I(RL) AT 100
TEXT -1904 48 Left 2 !.meas OP Io2rc FIND I(RL) AT 5
TEXT -1896 112 Left 2 ;Mido eficiencia
TEXT -1896 152 Left 2 ;-100*((V(vo)*I(RL))/(V(VIN)*I(VIN)))
TEXT -1904 72 Left 2 !.meas OP RegCar PARAM (-(Vo2rc-Vo1rc)/(Io2rc-Io1rc))
TEXT 560 1008 Left 2 ;Elegir opamps de baja Voff
TEXT -1360 592 Left 2 ;La alimentación de los opamps es VPOSA, ver si quiero que sea entre\n+Vcc y 0 o entre +Vcc y -Vcc.
TEXT 1320 240 Left 2 ;SELA es la tensión de control con la que elegimos si la salida es de 5V\no de 3.3V. Cuando SELA = 1, la salida es de 5V y cuando es 0, de 3.3V\n(si lo consideramos como una señal digital). También hay que considerar\nque la alimentación de los opamps va a ser VPOSA y nos convendría\nusar la menor cantidad de tensiones de control diferentes, por lo que\nsería conveniente que VPOSA sea también SELA.
TEXT 2120 -128 Left 2 ;Tener en cuanta que hay "low dropout" cuando la Ro (estática) es baja.
TEXT -1912 -544 Left 2 !.MODEL TIP42C PNP(Is=66.19f Xti=3 Eg=1.11 Vaf=100 Bf=137.6 Ise=862.2f Ne=1.481 Ikf=1.642 Nk=.5695 Xtb=2 Br=5.88 Isc=273.5f Nc=1.24 Ikr=3.555 Rc=79.39m Cjc=870.4p Mjc=.6481 Vjc=.75 Fc=.5 Cje=390.1p Mje=.4343 Vje=.75 Tr=235.4n Tf=23.21n Itf=71.33 Xtf=5.982 Vtf=10 Rb=.1 Vceo=100 Icrating=6 mfg=Texas)
TEXT -1912 -504 Left 2 !.MODEL TIP41C NPN (IS=7.55826e-11 BF=260.542 NF=1.11221 VAF=100 IKF=0.526814 ISE=1e-08 NE=2.18072 BR=26.0542 NR=1.5 VAR=1000 IKR=3.54059 ISC=1e-08 NC=1.63849 RB=4.56157 IRB=0.1 RBM=0.1 RE=0.0162111 RC=0.0810556 XTB=0.1 XTI=1 EG=1.206 CJE=1.93296e-10 VJE=0.4 MJE=0.259503 TF=1e-08 XTF=4.06972 VTF=7.1157 ITF=0.001 CJC=1.09657e-10 VJC=0.730921 MJC=0.23 XCJC=0.803085 FC=0.8 TR=9.01013e-08 PTF=0 Vceo=100 ICrating=6 mfg=ON_Semi)
TEXT -64 -392 Left 2 ;Todos los transistores pueden ser los TIP4x que tienen un beta muy chico o los BC5x7 con uno\nmucho mayor. Mejora la ganancia del circuito pero no tanto respecto a los anteriores. Sin embargo,\nhay que tener en cuenta que pueden haber grandes diferencias entre el circuito real y el simulado.\nEn la hoja de datos, el beta de los TIP4x es de alrededor de 20: muy chico.
TEXT 1264 -232 Left 2 ;Queremos los TIP42 en el transistor de paso porque\nqueremos que sea "low dropout", es decir, baja VCE.
TEXT 2376 376 Left 2 ;Usamos cinco opamps, los cuales se pueden comprar solos en un solo encampsulado\nde a varios. Lo máximo es encapsulado de cuatro juntos, por lo que convendría buscar\nalguna forma de eliminar uno y quedarnos solo con esos cuatro.
TEXT 1296 808 Left 2 ;Revisar qué hace R11
TEXT -1488 832 Left 2 ;5*R
TEXT -1472 1176 Left 2 ;5.44*R
TEXT -1408 1256 Left 2 ;4.6*R
TEXT -1288 936 Left 2 ;R
TEXT -960 1192 Left 2 ;R
TEXT -960 840 Left 2 ;R
TEXT -496 1000 Left 2 ;R
TEXT -568 1048 Left 2 ;R
TEXT -1016 1296 Left 2 ;Los valores de resistencias fueron elegidos de acuerdo con la presentación\nde la práctica pasada.
TEXT 2600 608 Left 2 !.inc LM324.lib
